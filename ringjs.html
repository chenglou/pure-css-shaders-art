<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
  }

  span {
    display: inline-block;
    height: 1rem;
    width: 1rem;
  }
</style>

<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>
<div>
  <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
</div>

<script>
  const spans = document.querySelectorAll('span')
  const rows = Math.sqrt(spans.length)
  function render(time) {
    time = time / 1000
    spans.forEach((s, i) => {
      const row = Math.floor(i / rows)
      const col = i % rows
      const x = row / (rows - 1)
      const y = col / (rows - 1)

      const u = 2.0 * x - 1.0
      const v = 2.0 * y - 1.0
      const dist = (u * u + v * v) / 2.0 - 0.25
      const quadrantDiv = v / (u + 0.001)

      const a = [
        quadrantDiv / (0.77 + 0.21 * quadrantDiv * quadrantDiv) + Math.sin(time) / 2.0 - 0.5,
        quadrantDiv / (0.77 + 0.21 * quadrantDiv * quadrantDiv) + Math.sin(time) / 2.0 - 0.5 + 1.5,
        quadrantDiv / (0.77 + 0.21 * quadrantDiv * quadrantDiv) + Math.sin(time) / 2.0 - 0.5 + 3.0,
        quadrantDiv / (0.77 + 0.21 * quadrantDiv * quadrantDiv) + Math.sin(time) / 2.0 - 0.5 + 4.5,
      ]

      const b = a.map((ax) => {
        return 1.6 * ax * (Math.PI - ax) / (50 - 4 * ax * (Math.PI - ax))
      })

      const bg = b.map((bx, index) => {
        const nextIndex = (index + 1) % b.length
        return Math.max(dist - bx, b[nextIndex] - dist)
      })

      const dot = bg.reduce((acc, currentValue, index) => {
        return acc + Math.min(Math.max(0, currentValue * 720), 72) * b[index]
      }, 0)

      const r = dot * (b[0] - 0.1) * 255
      const g = dot * (b[1] - 0.1) * 255
      const bColor = dot * (b[2] - 0.1) * 255

      s.style.backgroundColor = `rgb(${r},${g},${bColor})`
    })
    requestAnimationFrame(render)
  }
  render()
</script>
